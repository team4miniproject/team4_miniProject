<!DOCTYPE html>
<html lang="en">



}
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>헬스장</title>
    <!-- 구글폰트 시작코드 -->
    <link
      href="https://fonts.googleapis.com/css2?family=Nanum+Brush+Script&display=swap"
      rel="stylesheet"
    />
    <!-- 폰트어썸 시작코드 -->
    <script
      src="https://kit.fontawesome.com/06632c157c.js"
      crossorigin="anonymous"
    ></script>
    <!-- 부트스트랩 시작코드 -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
            crossorigin="anonymous"
    />
    <!-- 제이쿼리 에이잭스  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    
    </script>

    <style>
      @import url(//fonts.googleapis.com/earlyaccess/nanumgothic.css);

      .nanumgothic * {
        font-family: 'Nanum Gothic', sans-serif;
      }

      #category{
        color: transparent;
        background-color: transparent;
        border: none;
        display: none;
      }

      body{
          height: 100vh;
          background: url(https://images.squarespace-cdn.com/content/v1/56e487181d07c0743d227289/1557248970918-530M1TO27B7Q41OEE985/fitness-4-1500x77.jpg?format=1500w) no-repeat center;
          background-size:cover;
      }

      /* FIXME: */
      .body_{
      margin: 2px 20px 2px 20px;
      padding: 2px 2px 2px 2px;
      /* border: gray solid 3px; */
      border-radius: 40px;
      z-index: 100;
      background-color: rgba(241, 237, 237, 0.88);
      
        /* height: 2000px; */
        /* border-radius: 20px; */
        /* border: 1px #222222;
        border-color: rgba(51, 51, 51, 0.6);
        background-color: #222222;
        background-color: rgba(51, 51, 51, 0.6); */
        /* width: 500px; */
        /* display: flex; */
        /* justify-content: center; */
        /* position: absolute; */
        /* margin-top: 10%; */
      

      }



      .topbar {
        margin-top: 20px;
        width: auto;
        height: 70px;
        display: flex;
        justify-content: space-between;
      }
      .topbar_title {
        flex-basis: 40%;
        text-align: center;
        font-weight: 600;
        
      }
      .topbar_category {
        flex-basis: 55%;
        padding: 0px 0px 0px 10px;
        text-align: right;
        margin: 0px 40px 0px 20px;
        justify-content: space-between;
        /* line-height: 70px; */
      }

      
      
      .topbar_category_box_left{
        display: flex;
        
      }

      .topbar_category_box_left > button{
        margin: 2px 2px 0px 5px;
        float: left;
        border-radius: 10px;
        background-color: transparent;
        color: cornflowerblue;
        border: cornflowerblue 2px solid; 
       
        
      }

      .topbar_category_box_left > button:hover{
        border: cornflowerblue 2px solid;
        background-color: cornflowerblue;
        color: white;
        transition: all 500ms ease;
       
        
      }
      

      
      .topbar_category_box_right > button{
        
        margin-left: 1%;
        border-radius: 10px;
        background-color: transparent;
        color: cornflowerblue;
        border: cornflowerblue 2px solid;
      }

      .topbar_category_box_right > button:hover{
        
        margin-left: 1%;
        border-radius: 10px;
        background-color: cornflowerblue;
        color: white;
        border: cornflowerblue 2px solid;
        transition: all 500ms ease;
      }

      .topbar_category > button:hover{
        border: cornflowerblue 2px solid;
        background-color: cornflowerblue;
        color: white;
        transition: all 500ms ease;

      }
      

    


      /* <div class="topbar_category">
        <span class="topbar_category_nickname">{{nickname}}</span>
        <button class="button is-danger" onclick="logout()">Log out</button> */

      .description {
        display: flex;
      }

      .description_left {
        flex-basis: 40%;
        margin: 0px 20px 20px 20px;
        
      }

      .description_left_map {
        background-color: brown;
        height: 600px;
        /* 박스내에서 텍스트 작성, 스크롤 */
        box-sizing: border-box;
        background: transparent;        
        padding: 10px;
        overflow: auto;
      }

      .description_left_map::-webkit-scrollbar {
          display: none; /* Chrome, Safari, Opera*/
      }

      .card-body_left{
        padding: 5px 0px 5px 0px;
        border-radius: 20px;
        border: black solid 2px;
        text-align: center;
      }

      .card-body_left:hover{
        /* padding: 5px 0px 5px 0px;
        border-radius: 20px;
        background-color: gray;
        border: gray solid 2px;
        transition: all 500ms ease; */
        border: cornflowerblue 2px solid;
        background-color: cornflowerblue;
        color: white;
        transition: all 500ms ease;


      }


      .description_left_comment{
        margin: 20px 10px 0px 10px;
        display: flex;
      }
      
      
      /* 코멘트등록버튼 */
      .description_left_comment_btn{
        flex-basis: 15%;
        margin-left: 1%;
        border-radius: 10px;
        background-color: transparent;
        color: cornflowerblue;
        border: cornflowerblue 2px solid;
      }
      .description_left_comment_btn:hover{
        border: cornflowerblue 2px solid;
        background-color: cornflowerblue;
        color: white;
        transition: all 500ms ease;

      }
      .description_left_comment_input{
        
        flex-basis: 85%;
        width: 90%;
        margin-right: 1%;
        border-radius: 10px;
        border: cornflowerblue 2px solid;
        
      }
      
      /* 인풋박스 클릭시 */
      .description_left_comment_input:focus {
        outline: 2px solid cornflowerblue;
        
       

      }

      .card-body_right {
        padding: 5px 10px 5px 10px;
        border-radius: 20px;
        border: black solid 2px;
        margin-top: 20px;
        /* text-align: center; */
      }

      


      .description_right {
        flex-basis: 60%;
        margin: 0px 20px 20px 20px;
        box-sizing: border-box;
        background: transparent;
        height: 650px;
        
        padding: 10px;
        overflow: auto;
      }
      .description_right::-webkit-scrollbar {
          display: none; /* Chrome, Safari, Opera*/
      }

      .description_right_comment {
        border: 1px solid black;
        margin: 0px 0 10px 0;
        
      }
      .col{
        margin: 20px 0 20px 0px;
      }
      
    </style>

    <script>
      // ########################################메인페이지가 열리면 자신의위치 주위의 헬스장목록을 보여줌..
      $(document).ready(function () {
        show_gym();
      });
      // gym버튼클릭시
      function show_gym() {
        $('#topbar1').empty();
        $('#cards-box').empty();
        $.ajax({
          type: 'GET',
          url: '/gyms',
          data: {},
          success: function (response) {
            let rows = response['gymsList'];
            let category = response['gymsList'][1]['category']
            for (let i = 0; i < rows.length; i++) {
              let title = rows[i]['Title'];
              let desc = rows[i]['Desc'];
              let location = rows[i]['Location'];
              let phoneNumber = rows[i]['PhoneNumber'];
              //헬스장이름, 영업시간, 위치, 전화번호= 정보를 받아옴..
              let temp_html = `<div id="left_list" class="col" >
                                <div OnClick=" select_comment('${title}')" style="cursor:pointer;">
                                    
                                    <div class="card-body_left">
                                        <h3>${title}</h3>
                                        <span class="card-text">${location}</span>
                                        <span class="card-text">-${desc}</span>
                                        <p class="card-text">${phoneNumber}</p>
                                    </div>
                                </div>
                             </div>`;
              $('#cards-box').append(temp_html);

              


              
            }
            let temp_html2 = `<textarea id="category">${category}</textarea>
                                
                             `;
              $('#topbar1').append(temp_html2);
            
          },
        });
        
        
        //헬스장 코멘트만 보여주는기능....
        $('#comment-list').empty()
        $.ajax({
                type: "GET",
                url: "/comment",
                data: {},
                success: function (response) {
                    let rows = response['gymCommentList']
                    for (let i=0; i < rows.length; i++ ){
                        let title = rows[i]['title']
                        let comment = rows[i]['comment']
                        let nickname = rows[i]['nick']
                        
                        // 해당 코멘트박스의 title(헬스장이름), 코멘트, 현재로그인중인 닉네임 값을 받아옴

                        let temp_html = `<div class="card-body_right">
                                            <blockquote class="blockquote mb-0">
                                                <p>${comment}</p>
                                                <footer class="blockquote-footer">${nickname}(${title}) <cite title="Source Title"></cite></footer>
                                            </blockquote>
                                         </div>`
                        $('#comment-list').append(temp_html)
                    }

                }
            });

      }
      // 필라테스버튼 클릭시
      function show_pilates() {
        $('#topbar1').empty();
        $('#cards-box').empty();
        $.ajax({
          type: 'GET',
          url: '/pilates',
          data: {},
          success: function (response) {
            let rows = response['gymsList'];
            let category = response['gymsList'][1]['category']
            for (let i = 0; i < rows.length; i++) {
              let title = rows[i]['Title'];
              let desc = rows[i]['Desc'];
              let location = rows[i]['Location'];
              let phoneNumber = rows[i]['PhoneNumber'];
              //필라테스이름, 영업시간, 위치, 전화번호= 정보를 받아옴..
              let temp_html = `<div id="left_list" class="col" >
                                <div OnClick=" select_comment('${title}')" style="cursor:pointer;">
                                    
                                    <div class="card-body_left">
                                        <h3>${title}</h3>
                                        <span class="card-text">${location}</span>
                                        <span class="card-text">-${desc}</span>
                                        <p class="card-text">${phoneNumber}</p>
                                    </div>
                                </div>
                             </div>`;
              $('#cards-box').append(temp_html);

              


              
            }
            let temp_html2 = `<textarea id="category">${category}</textarea>
                                
                             `;
              $('#topbar1').append(temp_html2);
            
          },
        });

       
        //필라테스 코멘트만 보여주는기능....
        $('#comment-list').empty()
        $.ajax({
                type: "GET",
                url: "/pila_comment",
                data: {},
                success: function (response) {
                    let rows = response['gymCommentList']
                    for (let i=0; i < rows.length; i++ ){
                        let title = rows[i]['title']
                        let comment = rows[i]['comment']
                        let nickname = rows[i]['nick']
                        
                        // 해당 코멘트박스의 title(헬스장이름), 코멘트, 현재로그인중인 닉네임 값을 받아옴

                        let temp_html = `<div class="card-body_right">
                                            <blockquote class="blockquote mb-0">
                                                <p>${comment}</p>
                                                <footer class="blockquote-footer">${nickname}(${title}) <cite title="Source Title"></cite></footer>
                                            </blockquote>
                                         </div>`
                        $('#comment-list').append(temp_html)
                    }

                }
            });
      }

      //###################### 크로스핏버튼 클릭시
      function show_crossfit() {
        $('#topbar1').empty();
        $('#cards-box').empty();
        $.ajax({
          type: 'GET',
          url: '/crossfit',
          data: {},
          success: function (response) {
            let rows = response['gymsList'];
            let category = response['gymsList'][1]['category']
            for (let i = 0; i < rows.length; i++) {
              let title = rows[i]['Title'];
              let desc = rows[i]['Desc'];
              let location = rows[i]['Location'];
              let phoneNumber = rows[i]['PhoneNumber'];
              //크로스핏이름, 영업시간, 위치, 전화번호= 정보를 받아옴..
              let temp_html = `<div id="left_list" class="col" >
                                <div OnClick=" select_comment('${title}')" style="cursor:pointer;">
                                    
                                    <div class="card-body_left">
                                        <h3>${title}</h3>
                                        <span class="card-text">${location}</span>
                                        <span class="card-text">-${desc}</span>
                                        <p class="card-text">${phoneNumber}</p>
                                    </div>
                                </div>
                             </div>`;
              $('#cards-box').append(temp_html);

              


              
            }
            let temp_html2 = `<textarea id="category">${category}</textarea>
                                
                             `;
              $('#topbar1').append(temp_html2);
            
          },
        });

       
        //크로스핏 코멘트만 보여주는기능....
        $('#comment-list').empty()
        $.ajax({
                type: "GET",
                url: "/crossfit_comment",
                data: {},
                success: function (response) {
                    let rows = response['gymCommentList']
                    for (let i=0; i < rows.length; i++ ){
                        let title = rows[i]['title']
                        let comment = rows[i]['comment']
                        let nickname = rows[i]['nick']
                        
                        // 해당 코멘트박스의 title(이름), 코멘트, 현재로그인중인 닉네임 값을 받아옴

                        let temp_html = `<div class="card-body_right">
                                            <blockquote class="blockquote mb-0">
                                                <p>${comment}</p>
                                                <footer class="blockquote-footer">${nickname}(${title}) <cite title="Source Title"></cite></footer>
                                            </blockquote>
                                         </div>`
                        $('#comment-list').append(temp_html)
                    }

                }
            });
      }



            //###################### FIXME:수영장버튼 클릭시
      function show_swimming_pool() {
        $('#topbar1').empty();
        $('#cards-box').empty();
        $.ajax({
          type: 'GET',
          url: '/swimming_pool',
          data: {},
          success: function (response) {
            let rows = response['gymsList'];
            let category = response['gymsList'][1]['category']
            for (let i = 0; i < rows.length; i++) {
              let title = rows[i]['Title'];
              let desc = rows[i]['Desc'];
              let location = rows[i]['Location'];
              let phoneNumber = rows[i]['PhoneNumber'];
              //크로스핏이름, 영업시간, 위치, 전화번호= 정보를 받아옴..
              let temp_html = `<div id="left_list" class="col" >
                                <div OnClick=" select_comment('${title}')" style="cursor:pointer;">
                                    
                                    <div class="card-body_left">
                                        <h3>${title}</h3>
                                        <span class="card-text">${location}</span>
                                        <span class="card-text">-${desc}</span>
                                        <p class="card-text">${phoneNumber}</p>
                                    </div>
                                </div>
                             </div>`;
              $('#cards-box').append(temp_html);

              


              
            }
            let temp_html2 = `<textarea id="category">${category}</textarea>
                                
                             `;
              $('#topbar1').append(temp_html2);
            
          },
        });

       
        //수영장 코멘트만 보여주는기능....
        $('#comment-list').empty()
        $.ajax({
                type: "GET",
                url: "/swimming_pool_comment",
                data: {},
                success: function (response) {
                    let rows = response['gymCommentList']
                    for (let i=0; i < rows.length; i++ ){
                        let title = rows[i]['title']
                        let comment = rows[i]['comment']
                        let nickname = rows[i]['nick']
                        
                        // 해당 코멘트박스의 title(이름), 코멘트, 현재로그인중인 닉네임 값을 받아옴

                        let temp_html = `<div class="card-body_right">
                                            <blockquote class="blockquote mb-0">
                                                <p>${comment}</p>
                                                <footer class="blockquote-footer">${nickname}(${title}) <cite title="Source Title"></cite></footer>
                                            </blockquote>
                                         </div>`
                        $('#comment-list').append(temp_html)
                    }

                }
            });
      }

             //###################### FIXME:클라이밍버튼 클릭시
             function show_climbing() {
        $('#topbar1').empty();
        $('#cards-box').empty();
        $.ajax({
          type: 'GET',
          url: '/climbing',
          data: {},
          success: function (response) {
            let rows = response['gymsList'];
            let category = response['gymsList'][1]['category']
            for (let i = 0; i < rows.length; i++) {
              let title = rows[i]['Title'];
              let desc = rows[i]['Desc'];
              let location = rows[i]['Location'];
              let phoneNumber = rows[i]['PhoneNumber'];
              //이름, 영업시간, 위치, 전화번호= 정보를 받아옴..
              let temp_html = `<div id="left_list" class="col" >
                                <div OnClick=" select_comment('${title}')" style="cursor:pointer;">
                                    
                                    <div class="card-body_left">
                                        <h3>${title}</h3>
                                        <span class="card-text">${location}</span>
                                        <span class="card-text">-${desc}</span>
                                        <p class="card-text">${phoneNumber}</p>
                                    </div>
                                </div>
                             </div>`;
              $('#cards-box').append(temp_html);

              


              
            }
            let temp_html2 = `<textarea id="category">${category}</textarea>
                                
                             `;
              $('#topbar1').append(temp_html2);
            
          },
        });

       
        //클라이밍 코멘트만 보여주는기능....
        $('#comment-list').empty()
        $.ajax({
                type: "GET",
                url: "/climbing_comment",
                data: {},
                success: function (response) {
                    let rows = response['gymCommentList']
                    for (let i=0; i < rows.length; i++ ){
                        let title = rows[i]['title']
                        let comment = rows[i]['comment']
                        let nickname = rows[i]['nick']
                        
                        // 해당 코멘트박스의 title(이름), 코멘트, 현재로그인중인 닉네임 값을 받아옴

                        let temp_html = `<div class="card-body_right">
                                            <blockquote class="blockquote mb-0">
                                                <p>${comment}</p>
                                                <footer class="blockquote-footer">${nickname}(${title}) <cite title="Source Title"></cite></footer>
                                            </blockquote>
                                         </div>`
                        $('#comment-list').append(temp_html)
                    }

                }
            });
      }


      
      

// ################################################################################################################### 로그아웃기능 - 토큰값 지워버리고, 로그인창으로 돌아갈수있도록
      function logout(){
        $.removeCookie('mytoken');
        alert('로그아웃!')
        window.location.href='/'
      }

      
// ###################################################################################################################코멘트등록
      function select_comment(a) {
        // FIXME:로그인시 닉네임 id값    
            let nick = `{{nickname}}`
            let comment = $('#comment').val()
            let category =$('#category').val()
            console.log(category)
            let title = a
              console.log(title)

            $.ajax({
                type: 'POST',
                url: '/comment',
                data: {title_give:title,comment_give:comment,nick_give:nick,category_give:category },
                success: function (response) {
                    alert(response['msg'])
                    if (`${category}`== 'gym'){
                      $(document).ready(function(){
                      show_gym();
                    });

                    }else if(`${category}`== 'pilates'){
                      $(document).ready(function(){
                      show_pilates();
                    });
                    
                    }else if(`${category}`== 'crossfit'){
                      $(document).ready(function(){
                      show_crossfit();
                    });
                    
                    }else if(`${category}`== 'swimming_pool'){
                      $(document).ready(function(){
                      show_swimming_pool();
                    });
                    
                    }else if(`${category}`== 'climbing'){
                      $(document).ready(function(){
                      show_climbing();
                    });
                  }

                  
                }
            })
        }






        
    </script>
  </head>
  <body>
    
    
    <div class="body_">
      <!-- 상단바 -->
      <section class="topbar" >
        
        <h1 class="topbar_title">BadGym <span style="color: cornflowerblue; ">Out!</span></h1>
        <div class="topbar_category">
          <div class="topbar_category_box_left"> 
            <button onclick="show_gym()">헬스장</button>
            <button onclick="show_pilates()">필라테스</button>
            <button onclick="show_crossfit()">크로스핏</button>
            <button onclick="show_swimming_pool()">수영장</button>
            <button onclick="show_climbing()">클라이밍</button></div>
          <div class="topbar_category_box_right">
            <span class="topbar_category_nickname">{{nickname}}</span>
          <button class="button is-danger" onclick="logout()">Log out</button>
        </div>
          
        </div>
      </section>
      <section class="description">
        <!-- 왼쪽 크롤링값 -->
        <div class="description_left">
          <div class="description_left_map">
            <div id="cards-box">
              <div class="col">
              <!-- gym 목록이 나오는곳  -->
              </div>
            </div>
          </div>

          <!-- 코멘트박스 , 등록버튼 -->
          <div id="comment_button" class="description_left_comment">
            <input class="description_left_comment_input" id="comment" type="text" placeholder="Comment" />
            <button class="description_left_comment_btn"> 등록</button>
          </div>
        </div>

        <!-- 우측 리뷰박스 -->
        <div id="comment-list" class="description_right">
          
        </div>
      </section>
    </div>

    <!-- FIXME: -->
       <div id="topbar1">
        
  </div>
  </body>
</html>
